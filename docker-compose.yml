version: '2'
services:
#  eureka:
#    build: microservice-ecms-eureka-server
#    ports:
#    - 8761:8761
#  gateway-service:
#    build: microservice-ecms-gateway-service
#    ports:
#    - 8765:8765
  transcoding-service:
    build: microservice-ecms-transcoding
    ports:
    - 8080:8080
    depends_on:
    - logstash
    links:
    - logstash
#    - eureka
  elasticsearch:
    build: elk/elasticsearch/
    container_name: elasticsearch
    ports:
    - 9200:9200
    - 9300:9300
    environment:
      ES_JAVA_OPTS: -Xms1g -Xmx1g
  logstash:
    build: elk/logstash/
    container_name: logstash
    ports:
    - 9999:9999
    links:
    - elasticsearch
  kibana:
    build: elk/kibana/
    container_name: kibana
    volumes:
    - ./elk/kibana/config/:/opt/kibana/config/
    ports:
    - 5601:5601
    links:
    - elasticsearch